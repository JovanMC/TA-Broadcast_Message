<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PubSub</title>
    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link href="/assets/webix/webix.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/mdi/css/materialdesignicons.min.css" rel="stylesheet" type="text/css">
    <script src="/assets/webix/webix.min.js" type="text/javascript"></script>
</head>
<body>
<script>
    webix.ui({
        cols:[{},{rows:[{},{
            id:"form", gravity:10,
            view:"form", scroll:false,
            width:600,
            height: 300,
            elements: [
                {template:"<div style='color: #1c1c1c'><h1 style='text-align: center;'>Registrasi</h1></div>"},
                {view: "text", label: "Nama", name: "nama", labelwidth: 150},
                {view: "text", label: "Email", name: "email", labelwidth: 150},
                {view: "text", label: "Password", name: "password", labelwidth: 150},
                {id: "button-kirim", view: "button", value: "Submit", click: save},
                      ]
            } ,{}] },{}]
        });
    let formMahasiswa = $$("form")
    webix.extend(formMahasiswa, webix.ProgressBar)
    function save() {
        formMahasiswa.disable()
        formMahasiswa.showProgress()
        webix.ajax().post('/register', formMahasiswa.getValues())
            .then(function (response) {
                window.location.href = ("/form3")
            })
            .catch(function (response) {
                webix.message({type: "error",text: "kirim pesan Error! "})
            })
            .finally(function (){
                formMahasiswa.enable()
                formMahasiswa.hideProgress()
            })
    }

</script>
</body>
</html>