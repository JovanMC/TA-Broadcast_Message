<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PubSub</title>
    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link href="/assets/webix/webix.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/mdi/css/materialdesignicons.min.css" rel="stylesheet" type="text/css">
    <script src="/assets/webix/webix.min.js" type="text/javascript"></script>
</head>
<body>
<script>
    webix.ui({
        cols:[{},{rows:[{},{
        id:"form", gravity:10,
        view:"form", scroll:false,
        width:600,
        height: 300,
        elements: [
            {template:"<div style='color: #1c1c1c'><h1 style='text-align: center;'>Registrasi</h1></br><p style='text-align: center'>Silahkan Cek Email anda untuk kode Registrasi</p></div>"},
            {view: "text", label: "Kode", name: "kode", labelwidth: 150},
            {id: "button-kirim", view: "button", value: "Submit", click: save},
        ] } ,{}] },{}]
    });

    let formMahasiswa = $$("form")
    webix.extend(formMahasiswa, webix.ProgressBar)
    function save() {
        formMahasiswa.disable()
        formMahasiswa.showProgress()
        webix.ajax().post('/konfirmasi_Kode', formMahasiswa.getValues())
            .then(function (response) {
                let json = response.json()
                webix.message({type: "info", text: json.message})
                window.location.href = ("/form4")
            })
            .catch(function (response) {
                webix.message({type: "error",text: "kirim pesan Error! "})
            })
            .finally(function (){
                formMahasiswa.enable()
                formMahasiswa.hideProgress()
            })
    }
</script>
</body>
</html>